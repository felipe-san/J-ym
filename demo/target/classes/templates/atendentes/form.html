<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Novo Atendente</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/day-night.css">
</head>
<body>
<div style="position: fixed; top: 1.5rem; right: 2rem; z-index: 2000;">
  <button class="toggle-btn" id="toggleModeBtn" title="Alternar modo claro/escuro" aria-label="Alternar modo claro/escuro">🌙</button>
</div>
<div class="container mt-5">
    <h2 th:text="${#strings.isEmpty(indice) ? 'Novo Atendente' : 'Editar Atendente'}"></h2>
    <form th:action="${#strings.isEmpty(indice) ? '/atendentes/criar' : '/atendentes/editar/' + indice}" method="post" id="atendenteForm">
        <div class="mb-3">
            <label for="nome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="nome" name="nome" th:value="${atendente.nome}" required>
        </div>
        <div class="mb-3">
            <label for="matricula" class="form-label">Matrícula</label>
            <input type="number" class="form-control" id="matricula" name="matricula" th:value="${atendente.matricula}" required>
        </div>
        <div class="mb-3">
            <label for="turno" class="form-label">Turno</label>
            <select class="form-select" id="turno" name="turno" required>
                <option th:each="t : ${T(br.cefet.model.TipoTurno).values()}" th:value="${t}" th:text="${t.turno}" th:selected="${atendente.turno} == ${t}"></option>
            </select>
        </div>
        <div class="mb-3">
            <label for="genero" class="form-label">Gênero</label>
            <input type="text" class="form-control" id="genero" name="genero" th:value="${atendente.genero}" required>
        </div>
        <div class="mb-3">
            <label for="salario" class="form-label">Salário</label>
            <input type="number" step="0.01" class="form-control" id="salario" name="salario" th:value="${atendente.salario}" required>
        </div>
        <div class="mb-3">
            <label for="setor" class="form-label">Setor</label>
            <input type="text" class="form-control" id="setor" name="setor" th:value="${atendente.setor}" required>
        </div>
        <div class="mb-3">
            <label for="dataNascimento" class="form-label">Data de Nascimento</label>
            <input type="date" class="form-control" id="dataNascimento" name="dataNascimento" th:value="${atendente.dataNascimento != null && atendente.dataNascimento.matches('\\d{2}/\\d{2}/\\d{4}') ? (atendente.dataNascimento.substring(6,10) + '-' + atendente.dataNascimento.substring(3,5) + '-' + atendente.dataNascimento.substring(0,2)) : atendente.dataNascimento}" required>
<script>
const btn = document.getElementById('toggleModeBtn');
const setMode = (night) => {
    if (night) {
        document.body.classList.add('night-mode');
        btn.textContent = '☀️';
    } else {
        document.body.classList.remove('night-mode');
        btn.textContent = '🌙';
    }
    localStorage.setItem('nightMode', night ? '1' : '0');
};
btn.addEventListener('click', () => {
    const isNight = !document.body.classList.contains('night-mode');
    setMode(isNight);
});
if (localStorage.getItem('nightMode') === '1') {
    setMode(true);
} else {
    setMode(false);
}
</script>
        </div>
        <div class="mb-3">
            <label for="tipoContrato" class="form-label">Tipo de Contrato</label>
            <select class="form-select" id="tipoContrato" name="tipoContrato" required>
                <option th:each="c : ${T(br.cefet.model.TipoContrato).values()}" th:value="${c}" th:text="${c.contrato}" th:selected="${atendente.tipoContrato} == ${c}"></option>
            </select>
        </div>
        <div class="mb-3">
            <label for="status" class="form-label">Status</label>
            <input type="text" class="form-control" id="status" name="status" th:value="${atendente.status}" required>
        </div>
        <div class="mb-3">
            <label for="dataAdmissao" class="form-label">Data de Admissão</label>
            <input type="date" class="form-control" id="dataAdmissao" name="dataAdmissao" th:value="${atendente.dataAdmissao != null && atendente.dataAdmissao.matches('\\d{2}/\\d{2}/\\d{4}') ? (atendente.dataAdmissao.substring(6,10) + '-' + atendente.dataAdmissao.substring(3,5) + '-' + atendente.dataAdmissao.substring(0,2)) : atendente.dataAdmissao}" required>
        </div>
        <div class="mb-3">
            <label for="ctps" class="form-label">CTPS</label>
            <input type="text" class="form-control" id="ctps" name="ctps" th:value="${atendente.ctps}" required>
        </div>
        <button type="submit" class="btn btn-primary">Salvar</button>
        <a th:href="@{/atendentes}" class="btn btn-secondary">Cancelar</a>
    </form>
    </form>
</div>
</body>
</html>
